<view class="container">
  <!-- å·¥å…·æ  -->
  <view class="toolbar">
    <view class="search-box" bindtap="showSearchPanel">
      <text class="search-icon">ğŸ”</text>
      <text class="search-text">{{searchKeyword || 'æœç´¢å¥å­...'}}</text>
    </view>
    <view class="toolbar-buttons">
      <view class="upload-btn" bindtap="showUploadPanel">
        <text class="upload-icon">â•</text>
        <text class="upload-text">ä¸Šä¼ </text>
      </view>
    </view>
  </view>

  <!-- æœç´¢ä¿¡æ¯æ˜¾ç¤º -->
  <text wx:if="{{isSearching}}" class="search-info">
    æœç´¢"{{searchKeyword}}"ï¼Œæ‰¾åˆ° {{filteredSentences.length}} æ¡ç»“æœ
  </text>

  <view class="header">
    <text class="title">å¥å­å±•ç¤º</text>
    <text class="subtitle">ç¬¬ {{currentIndex + 1}} æ¡ / å…± {{totalCount}} æ¡</text>
  </view>
  
  <view class="navigation">
    <view class="nav-btn prev-btn" bindtap="prevSentence">
      <text class="btn-icon">â†</text>
      <text class="btn-text">ä¸Šä¸€æ¡</text>
    </view>
    
    <view class="nav-btn random-btn" bindtap="randomSentence">
      <text class="btn-icon">ğŸ²</text>
      <text class="btn-text">éšæœº</text>
    </view>
    
    <view class="nav-btn next-btn" bindtap="nextSentence">
      <text class="btn-text">ä¸‹ä¸€æ¡</text>
      <text class="btn-icon">â†’</text>
    </view>
  </view>
  
  <view class="content-section">
    <view wx:if="{{currentSentence}}" class="sentence-card">
      <view class="sentence-content">{{currentSentence.content}}</view>
      <view class="sentence-meta">
        <text class="category-badge">{{currentSentence.category}}</text>
        <view class="action-buttons">
          <text class="favorite-btn {{currentSentence.isFavorite ? 'favorited' : ''}}" 
                 bindtap="toggleFavorite">â¤ï¸</text>
          <text class="speak-btn" bindtap="speakSentence">ğŸ”Š</text>
        </view>
      </view>
      <text wx:if="{{currentSentence.source === 'user'}}" class="sentence-source">ç”¨æˆ·ä¸Šä¼ </text>
    </view>
    
    <view wx:else class="empty-state">
      <text>æš‚æ— æ•°æ®</text>
    </view>
  </view>

  <!-- æœç´¢é¢æ¿ -->
  <view wx:if="{{showSearchPanel}}" class="mask" bindtap="hideSearchPanel"></view>
  <view wx:if="{{showSearchPanel}}" class="search-panel">
    <view class="search-input-container">
      <input class="search-input" placeholder="è¾“å…¥å…³é”®è¯æœç´¢å¥å­..." 
             value="{{searchKeyword}}" bindinput="onSearchInput" focus="{{true}}"/>
      <view class="search-actions">
        <view class="search-clear" bindtap="clearSearch">æ¸…é™¤</view>
        <view class="search-close" bindtap="hideSearchPanel">å…³é—­</view>
      </view>
    </view>
  </view>

  <!-- ä¸Šä¼ é¢æ¿ -->
  <view wx:if="{{showUploadPanel}}" class="mask" bindtap="hideUploadPanel"></view>
  <view wx:if="{{showUploadPanel}}" class="upload-panel">
    <view class="panel-header">
      <text class="panel-title">ä¸Šä¼ æ–°å¥å­</text>
      <text class="panel-close" bindtap="hideUploadPanel">Ã—</text>
    </view>
    <view class="upload-form">
      <view class="form-group">
        <text class="form-label">å¥å­å†…å®¹</text>
        <textarea class="form-textarea" placeholder="è¯·è¾“å…¥å¥å­å†…å®¹..." 
                  value="{{newSentence.content}}" bindinput="onSentenceInput" maxlength="200"/>
        <text class="char-count">{{newSentence.content ? newSentence.content.length : 0}}/200</text>
      </view>
      <view class="form-group">
        <text class="form-label">åˆ†ç±»</text>
        <input class="form-input" placeholder="è¯·è¾“å…¥åˆ†ç±»ï¼Œå¦‚ï¼šåŠ±å¿—ã€çˆ±æƒ…ç­‰" 
               value="{{newSentence.category}}" bindinput="onCategoryInput"/>
      </view>
      <view class="upload-actions">
        <view class="btn-secondary" bindtap="hideUploadPanel">å–æ¶ˆ</view>
        <view class="btn-primary {{!newSentence.content || !newSentence.category ? 'disabled' : ''}}" 
              bindtap="uploadSentence" disabled="{{!newSentence.content || !newSentence.category}}">
          ä¸Šä¼ 
        </view>
      </view>
    </view>
  </view>
</view>